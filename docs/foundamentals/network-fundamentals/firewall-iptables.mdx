---
sidebar_position: 3
---

# Firewall (iptables, firewalld, ufw)

Un **firewall** in Linux filtra i pacchetti di rete: decide quali connessioni sono permesse o bloccate in base a regole definite (IP sorgente, porta destinazione, protocollo, ecc.).

**iptables**, **firewalld**, **ufw** controllano tutti il sistema di filtraggio pacchetti su Linux, con alcune differenze.

Differenze principali:

|                  | **iptables**                              | **ufw** (Uncomplicated Firewall)          | **firewalld**                              |
|-------------------------|--------------------------------------------|--------------------------------------------|---------------------------------------------|
| **Tipo**                | Strumento CLI di basso livello             | Wrapper / frontend semplificato            | Demone dinamico + frontend                  |
| **Backend attuale**     | Legacy (iptables-legacy o nftables)        | Di solito **nftables**         | Quasi sempre **nftables** (Fedora/RHEL)     |
| **Preinstallato di default su** | Quasi tutte le distro Linux               | Ubuntu, Debian e derivate                  | Fedora, RHEL 8/9/10, Rocky, AlmaLinux       |
| **Ideale per**          | Controllo massimo, scripting, server datati | Principianti, desktop, server semplici     | Server con più interfacce/reti, laptop che cambiano location |
| **GUI disponibile**     | No                                         | No (ma esiste gufw)                        | Sì (`firewall-config`, applet)              |

### Esempi pratici

**iptables** (stile classico, verboso)

```bash
# IPv4
sudo iptables -A INPUT -p tcp --dport 22   -m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT
sudo iptables -A INPUT -p tcp --dport 80   -m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT
sudo iptables -A INPUT -p tcp --dport 443  -m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT
sudo iptables -A INPUT -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT
sudo iptables -P INPUT DROP

# Per applicare le regole occorre salvarle (es. iptables-save > /etc/iptables/rules.v4)
```

**ufw** (più semplice)

```bash
sudo ufw allow OpenSSH       # oppure allow 22/tcp
sudo ufw allow http
sudo ufw allow https
sudo ufw enable
sudo ufw status verbose
```

**firewalld** 

```bash
# Aggiungi servizi alla zona attiva (di solito "public")
sudo firewall-cmd --permanent --add-service=ssh
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload

# Oppure tutto in un comando (versioni recenti)
sudo firewall-cmd --add-service={ssh,http,https} --permanent
sudo firewall-cmd --reload

sudo firewall-cmd --list-all
```

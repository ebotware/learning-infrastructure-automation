---
sidebar_position: 3
---

# Firewall (iptables, firewalld, ufw)

Un **firewall** in Linux filtra i pacchetti di rete: decide quali connessioni sono permesse o bloccate in base a regole definite (IP sorgente, porta destinazione, protocollo, ecc.).

**iptables**, **firewalld**, **ufw** controllano tutti il sistema di filtraggio pacchetti del kernel Linux (in passato **iptables**, oggi sempre più spesso **nftables** nel 2026), ma lo fanno con approcci, sintassi e livelli di complessità molto diversi.

Differenze principali:

|                  | **iptables**                              | **ufw** (Uncomplicated Firewall)          | **firewalld**                              |
|-------------------------|--------------------------------------------|--------------------------------------------|---------------------------------------------|
| **Tipo**                | Strumento CLI di basso livello             | Wrapper / frontend semplificato            | Demone dinamico + frontend                  |
| **Backend attuale**     | Legacy (iptables-legacy o nftables)        | Di solito **nftables** (dal 2024+)         | Quasi sempre **nftables** (Fedora/RHEL)     |
| **Curva di apprendimento** | Molto ripida                              | Molto facile                               | Media                                       |
| **Preinstallato di default su** | Quasi tutte le distro Linux               | Ubuntu, Debian e derivate                  | Fedora, RHEL 8/9/10, Rocky, AlmaLinux       |
| **Sintassi**            | Molto verbosa e complessa                  | Comandi in inglese semplice                | Pulita + concetto di zone + opzione GUI     |
| **Regole dinamiche**    | No (devi salvare e ricaricare manualmente) | Sì (cambi immediati)                       | Sì (eccellente: runtime vs permanente)      |
| **Zone / profili**      | No (devi creare chain manualmente)         | No (lista piatta + profili app)            | Sì (molto potente: trusted, public, internal, dmz, block, drop…) |
| **Ideale per**          | Controllo massimo, scripting, server vecchi | Principianti, desktop, server semplici     | Server con più interfacce/reti, laptop che cambiano location |
| **Stato nel 2026**      | **Legacy** — funziona ancora, ma molte distro usano nftables di default | Ancora molto usato e mantenuto             | Ancora molto usato e attivamente sviluppato |
| **GUI disponibile**     | No                                         | No (ma esiste gufw)                        | Sì (`firewall-config`, applet)              |

### Esempi pratici – consentire SSH (porta 22) + server web (80+443)

**iptables** (stile classico – molto verboso)

```bash
# IPv4
sudo iptables -A INPUT -p tcp --dport 22   -m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT
sudo iptables -A INPUT -p tcp --dport 80   -m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT
sudo iptables -A INPUT -p tcp --dport 443  -m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT
sudo iptables -A INPUT -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT
sudo iptables -P INPUT DROP

# Devi ancora salvare le regole (es. iptables-save > /etc/iptables/rules.v4)
```

**ufw** (pulito e semplice – stile Ubuntu)

```bash
sudo ufw allow OpenSSH       # oppure allow 22/tcp
sudo ufw allow http
sudo ufw allow https
sudo ufw enable
sudo ufw status verbose
```

**firewalld** (basato su zone – stile enterprise moderno)

```bash
# Aggiungi servizi alla zona attiva (di solito "public")
sudo firewall-cmd --permanent --add-service=ssh
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload

# Oppure tutto in un comando (versioni recenti)
sudo firewall-cmd --add-service={ssh,http,https} --permanent
sudo firewall-cmd --reload

sudo firewall-cmd --list-all
```

### Quale scegliere nel 2026?

| Situazione                                  | Scelta consigliata          | Perché |
|---------------------------------------------|------------------------------|------|
| Ubuntu / Pop!_OS / Linux Mint / Debian      | **ufw** (o gufw con interfaccia grafica) | È già presente, semplicissimo |
| Fedora / RHEL / Rocky / AlmaLinux           | **firewalld**               | Predefinito, zone utilissime, integrazione perfetta |
| Arch / Gentoo / NixOS / utente avanzato     | **nftables** diretto o firewalld/ufw | Backend più moderno |
| Server molto vecchio (CentOS 7, Debian 9…)  | **iptables**                | Compatibilità |
| Hai bisogno di controllo totale / chain custom | **nftables** o **iptables-legacy** | Nessun livello di astrazione |
| Laptop che cambia spesso rete (casa, ufficio, caffè) | **firewalld**               | Le zone gestiscono automaticamente i contesti diversi |
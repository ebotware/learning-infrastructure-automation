---
sidebar_position: 2
---

# Parsing di file e manipolazione del testo con `grep`, `sed` e `awk`

Queste tre utility (parte del toolkit GNU coreutils e standard su Linux/macOS/WSL) sono tra gli strumenti più potenti per lavorare con file di testo in shell (bash/zsh/fish). Sono ideali per estrazione, ricerca, sostituzione e ristrutturazione di dati senza dover scrivere script complessi in Python/Perl.

## **grep** – Ricerca di pattern (Global Regular Expression Print)
Cerca stringhe o regex nei file (o stdin).

### Esempi
Sia dato `logfile.txt` col seguente contenuto
```
error null pointer exception
Error null array out of bounds
warning unused variable 'e'
success element created!
error unknown exception
```
#### Ricerca semplice
Cercare la parola `error` all'interno del file
```bash
grep "error" logfile.txt
```
```
error null pointer exception
error unknown exception
```

#### Ricerca case-**in**sensitive
Ricerca ignorando se il carattere è maiuscolo o minuscolo
```
grep -i "error" logfile.txt
```
```
error null pointer exception
Error null array out of bounds
error unknown exception
```

#### Ricerca con numero riga
Ricerca ignorando se il carattere è maiuscolo o minuscolo
```
grep -n "success" logfile.txt
```
```
4:success element created!
```

#### Ricerca in tutti i file in un percorso
Ricerca **r**icorsiva in tutti file in una cartella mostrando il **n**umero di riga
```
grep -rn "error" .
```
```
./logfile.txt:1:error null pointer exception
./logfile.txt:5:error unknown exception
```

#### Ricerca in tutti i file in un percorso con una determinata estenione
```
# Cerca in tutti i file .log
grep -rn "success" . --include="*.md"
```

#### Regex (extended)
```
grep -E "(error|warning|fail)" logfile.txt
```
```
error null pointer exception
warning unused variable 'e'
error unknown exception
```
#### Altri comandi utili
```
# Conta occorrenze
grep -c "error" logfile.txt

# Inverte il match
grep -v "success" logfile.txt

# Cerca in tutti i file .log
grep -rn "success" . --include="*.md"
```


## **sed** – Editor di flusso (Stream EDitor)
Edit text in a scriptable manner.See also: awk, ed.More information: https://www.gnu.org/software/sed/manual/sed.html.
```bash
- Replace all apple (basic regex) occurrences with mango (basic regex) in all input lines and print the result to stdout:
   {{command}} | sed 's/apple/mango/g'

- Execute a specific script [f]ile and print the result to stdout:
   {{command}} | sed -f {{path/to/script.sed}}

- Print just a first line to stdout:
   {{command}} | sed -n '1p'
```
## 3. **awk** – Linguaggio di elaborazione testi (pattern scanning + processing)
A versatile programming language for working on files. More information: https://github.com/onetrueawk/awk.
```bash
- Print the fifth column (a.k.a. field) in a space-separated file:
  awk '{print $5}' {{path/to/file}}

- Print the second column of the lines containing "foo" in a space-separated file:
  awk '/{{foo}}/ {print $2}' {{path/to/file}}

- Print the last column of each line in a file, using a comma (instead of space) as a field separator:
  awk -F ',' '{print $NF}' {{path/to/file}}

- Sum the values in the first column of a file and print the total:
  awk '{s+=$1} END {print s}' {{path/to/file}}

- Print every third line starting from the first line:
  awk 'NR%3==1' {{path/to/file}}

- Print different values based on conditions:
  awk '{if ($1 == "foo") print "Exact match foo"; else if ($1 ~ "bar") print "Partial match bar"; else print "Baz"}' {{path/to/file}}

- Print all lines where the 10th column value equals the specified value:
  awk '($10 == value)'

- Print all the lines which the 10th column value is between a min and a max:
  awk '($10 >= min_value && $10 <= max_value)'
```
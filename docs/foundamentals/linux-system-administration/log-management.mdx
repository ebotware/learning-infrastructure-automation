---
sidebar_position: 5
---

# Log management

La gestione dei log è fondamentale per monitorare, diagnosticare e mantenere la salute dei sistemi Linux. 
I log registrano eventi di sistema, attività degli utenti, errori e informazioni delle applicazioni, consentendo agli amministratori di rilevare problemi, analizzare performance e garantire la sicurezza.

## Dove si trovano i log in Linux

La maggior parte dei log tradizionali sono file di testo normale situati in:

```
/var/log/
```

Di cui tra i più importanti e noti:

* `syslog` oppure `messages` – attività generale del sistema
* `auth.log` / `secure` – accessi, sudo, SSH
* `kern.log` – messaggi del kernel
* `boot.log` – processo di avvio

## Visualizzare i log
Metodo classico:

```bash
tail -f /var/log/syslog
```
Mostra le ultime 10 righe di ogni FILE sullo standard output. Con il parametro `-f`, continua a mostrare i dati che vengono aggiunti man mano che il file cresce.

```bash
grep ssh /var/log/auth.log # Filtra i risultati
```

## Sistemi basati su journal (systemd):

journalctl di un servizio specifico (`nginx`) e segui in tempo reale

```bash
journalctl -u nginx -f
```

journalctl dell’ultima ora

```bash
journalctl --since "1 hour ago"
journalctl -u cbram -S "1 hour ago"
```

## Rotazione dei log
Gestita da **logrotate**.

Posizioni dei file di configurazione:

* Globale: `/etc/logrotate.conf`
* Per singola applicazione: `/etc/logrotate.d/*`

Esempio:
File `/etc/logrotate.d/postgresql-common`
```conf
/var/log/postgresql/*.log {
       weekly
       rotate 10
       copytruncate
       delaycompress
       compress
       notifempty
       missingok
       su root root
}
```

Test manuale (dry-run):

```bash
logrotate -d /etc/logrotate.conf
```

## Livelli di log 

Livelli standard:

* `DEBUG`
* `INFO`
* `NOTICE`
* `WARNING`
* `ERROR`
* `CRITICAL`

Esempio di filtro:

```bash
journalctl -p err

```

## Gestione centralizzata dei log
La gestione centralizzata dei log permette di aggregare log proveniente da differenti sorgenti in una unica piattaforma, facilitandone il monitoraggio.

Possibili soluzioni esistenti trovate su internet (non testate)
* **Grafana + Loki** – Loki raccoglie i log, Grafana li visualizza in dashboard personalizzate. (molto popolare)
* **ELK / OpenSearch** – Combina Elasticsearch (archiviazione e ricerca), Logstash (trasformazione dei log) e Kibana (visualizzazione).
* **Graylog** – Piattaforma open-source per raccolta, analisi e allarmi sui log.
* **Splunk** – Soluzione commerciale avanzata per raccolta, ricerca e analisi dei log.

